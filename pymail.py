#!/usr/bin/python

import socket, sys

if len(sys.argv) != 6:
	print "usage: emailsnd.py <Sending Domain> <From Name> <MAIL FROM> <To Name> <RCPT TO>"
	sys.exit(0)

s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)
#change IP address to local/remote mail relay
connect=s.connect(('127.0.0.1',25))
banner=s.recv(1024)
print banner
s.send('HELO ' + sys.argv[1] + '\r\n')
hresult=s.recv(1024)
print hresult
s.send('MAIL FROM: <' + sys.argv[3] + '>\r\n')
mresult=s.recv(1024)
print mresult
s.send('RCPT TO: <' + sys.argv[5] + '>\r\n')
rresult=s.recv(1024)
print rresult
s.send('DATA\r\n')
dresult=s.recv(1024)
print dresult
s.send('From: ' + sys.argv[2] + ' <' + sys.argv[3] + '>\r\n')
s.send('To: ' + sys.argv[4] + ' <' + sys.argv[5] + '>\r\n')
#subject
s.send('Subject: Your lucky day!\r\n')
#body
s.send('Mime-Version: 1.0;\r\n')
s.send('Content-Type: text/html; charset="ISO-8859-1";\r\n')
s.send('Content-Transfer-Encoding: 7bit;\r\n')
#html content will work with all usual html markup
s.send('<html><head></head><body></body></html>')
s.send('Testing 123\r\n.\r\n')
d2result=s.recv(1024)
print d2result
s.send('QUIT\r\n')
qresult=s.recv(1024)
print qresult
s.close()
